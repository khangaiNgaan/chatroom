<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>security - coffeeroom</title>
    <meta name="theme-color" content="#d8e3ed" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#242931" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/style.css">
    <script>
      (function() {
          const savedMode = localStorage.getItem('theme-mode') || 'auto';
          let isDark = false;
          let isMono = false;
          if (savedMode === 'auto') {
              isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          } else if (savedMode === 'mono') {
              isMono = true;
          } else {
              isDark = (savedMode === 'dark');
          }
          if (isDark) {
              document.documentElement.setAttribute('data-theme', 'dark');
          } else if (isMono) {
              document.documentElement.setAttribute('data-theme', 'mono');
          }
      })();
    </script>
  </head>
  <body>
    <div class="box">
        <div class="content">
          <div class="header">
            <span class="title">coffeeroom</span>
            <span class="themebtn">
              <span id="user-display">loading...</span>
              theme: <a href="#" id="darkModeButton">auto</a>
            </span>
          </div>
          
          <div class="title" style="margin: 30px 0 20px 0; font-size: 18px;">Account Settings</div>
          <div class="title" style="margin: 30px 0 20px 0;">Change Password</div>
          <div style="font-size: 14px;"><a href="/user/change_password.html">Change your password &gt;</a></div>
          <div class="note" style="margin: 10px 0;">Change your password at any time.</div>
          <div class="title" style="margin: 30px 0 20px 0;">Access Tokens</div>
          <div style="font-size: 14px;"><a href="/user/get_tokens.html">Manage Access Tokens &gt;</a>
          <div class="note" style="margin: 10px 0;">Access tokens could be used to login without a password and turnstile check.</div>
          <div class="title" style="margin: 30px 0 20px 0;">Email</div>

          <!-- 已绑定状态 -->
          <div id="email-bound-section" style="display: none;">
              <div style="font-size: 14px; margin-bottom: 5px; font-family: 'unifont', sans-serif;">Current: <span id="current-email" style="font-family: 'unifont', sans-serif;"></span> <span style="color:var(--success-color); font-size:14px;">(verified)</span></div>
              <div style="font-size: 14px; margin-top: 20px;">
                  <a href="/user/change_email.html">Change email &gt;</a>
              </div>
              <div style="font-size: 14px; margin-top: 5px;">
                  <a href="/user/remove_email.html">Remove email &gt;</a>
              </div>
          </div>

          <!-- 未绑定状态 -->
          <div id="email-unbound-section" style="display: none;">
              <div style="font-size: 14px;"><a href="/user/bind_email.html">Bind email &gt;</a></div>
          </div>
          
          <div class="note" style="margin: 10px 0;">This is not required. If you want, you can bind your email here.</div>
          <div class="title" style="margin: 30px 0 20px 0;">2FA Settings</div>
          
          <div id="2fa-enabled-msg" style="display: none; font-size: 14px; margin-bottom: 5px; font-family: 'unifont', sans-serif;">
              <span style="color:var(--success-color);">2FA is currently enabled.</span>
          </div>

          <div style="font-size: 14px; margin-top: 20px;"><a href="/user/2fa.html" id="2fa-link">2FA Settings &gt;</a></div>
          <div class="note" style="margin: 10px 0;">Enable two-factor authentication (2FA) to add an extra layer of security to your account.</div>
          <div class="title" style="margin: 30px 0 20px 0;">Delete Account</div>
          <div class="note" style="margin: 10px 0;">Delete your account permanently. This action is irreversible.</div>

          <br>
          <div class="back"><a href="/user/profile.html">&lt; back to profile</a></div>
        </div>
        <footer>
          <span class="copyright">Copyright (c) 2025-2026 <a href="https://caffeine.ink" target="_blank" rel="noopener noreferrer">caffeine-Ink</a>. Licensed under <a href="https://caffeine.ink/pages/agpl-3.0-standalone.html" target="_blank" rel="noopener noreferrer">AGPLv3</a>.</span>
          <span class="version"><span class="app-ver"></span> (<a href="https://github.com/khangaiNgaan/chatroom" target="_blank" rel="noopener noreferrer">source code</a>)</span>
        </footer>
    </div>
    <script src="/scripts/theme.js"></script>
    <script defer src="/scripts/favicon.js"></script>
    <script src="/scripts/version.js"></script>
    <script src="/scripts/settings.js"></script>
  </body>
</html>